# 功能规格：官方文档站（用户文档）

**功能分支**：`001-vitepress-docs`  
**创建时间**：2025-11-22  
**状态**：实施中（核心文档结构已落地，多语言页面与导航基本完成，收尾与验证 Gate 进行中）  
**输入**：用户描述：“为了让我们的项目更有影响力，需要编写一个官方文档vitepress.制作的过程中不要出现我们的绝对路径。只要演示代码如何使用即可，有什么核心功能和api还有高级案例代码”

## 用户场景与测试 *(必填)*

### 用户故事 1 - 新开发者 10 分钟完成第一个示例（优先级：P1）

一名第一次接触项目的外部开发者，希望快速判断该项目是否适合自己的场景，并在极短时间内跑通一个最小可用示例，而不必阅读源码或翻查历史文档。

**优先级原因**：这是项目“第一印象”的核心入口，直接影响项目传播与采纳率；若新用户无法在几分钟内看到成功结果，很可能直接放弃。

**独立测试**：从“完全不了解项目”的前提出发，只允许测试人员访问官方文档站，不允许额外咨询或搜索；验证其是否能在 10 分钟内按照“快速开始”文档完成环境准备、复制示例代码并获得一次成功的模型响应。

**验收场景**：

1. **Given** 新开发者首次访问官方文档首页，**When** 按照“快速开始”章节提供的步骤完成环境准备、复制示例代码并进行必要的配置，**Then** 在 10 分钟内可以看到一次成功的模型响应结果，并且过程中不需要查阅仓库源码。
2. **Given** 开发者使用任意主流桌面操作系统，**When** 其严格按照“快速开始”中的指引复制代码和配置路径，**Then** 所有文档中的示例均只使用相对路径、模块名或占位符路径，不出现任何开发者本机的绝对文件路径。

---

### 用户故事 2 - 现有用户系统性理解核心功能与 API（优先级：P2）

已经完成基础示例的用户，希望系统性地理解项目提供的核心能力（如 Agent 运行方式、配置、模型供应商集成、记忆与持久化、错误语义等），并能快速找到对应的页面和示例代码来支持自己的集成工作。

**优先级原因**：核心功能与 API 的可发现性和可理解性决定了用户能否在项目之上构建真实业务，而不仅停留在 Demo 阶段。

**独立测试**：让测试人员从一个具体需求出发（例如“切换模型供应商”“启用记忆存储”“查看错误处理行为”），只通过文档的导航与搜索功能查找相关章节，并根据页面中的说明与示例代码完成配置与集成。

**验收场景**：

1. **Given** 用户希望了解项目的核心能力范围，**When** 访问文档中的“概览 / 核心功能与 API”类章节，**Then** 能在单一入口看到所有关键能力的列表、每项能力的简短说明以及指向详细页面与示例代码的清晰链接。
2. **Given** 用户需要为具体场景查找说明（如“配置模型供应商”“使用记忆存储”“处理错误与超时”），**When** 通过文档站的导航或搜索功能查找相关主题，**Then** 能在不超过 3 次点击或一次搜索结果中直接进入目标页面，并获得至少一个可复制的示例代码片段。

---

### 用户故事 3 - 高级用户基于高级案例构建复杂 Agent 流（优先级：P3）

具备一定经验的高级用户希望在项目之上构建更复杂的多步骤、多模型或多 Agent 的工作流，并通过官方提供的高级案例了解推荐实践、性能和可维护性考虑，而不是自行摸索。

**优先级原因**：高级案例决定项目在“生产级使用”和“复杂场景”中的说服力，也是社区传播、分享和二次创作的重要基础。

**独立测试**：选择高级案例中的任意一篇（如“多模型回退与路由”“结合向量检索的知识库助手”“带持久记忆的长会话代理”），让测试人员只根据该页面的说明和示例代码完成部署和运行，并在必要时做小幅度调整以适配自己的业务场景。

**验收场景**：

1. **Given** 高级用户需要实现一个包含多步推理和多模型选择的复杂 Agent 流程，**When** 其阅读高级案例文档中关于“组合多模型和工具”的完整示例，**Then** 能在不阅读源码的前提下，理解每一步的设计意图，并将示例中的代码结构复用到自己的项目中。
2. **Given** 高级用户希望参考一个结合记忆存储与外部知识库的案例，**When** 其按照对应高级案例页面的步骤准备数据、配置环境并运行示例代码，**Then** 能获得与文档描述一致的行为，并且示例中不包含任何与维护者本机相关的绝对文件路径或敏感信息。

---

### 边界场景

- 当用户尚未配置任何模型供应商密钥或端点时，文档需要明确标注哪些示例可以在“仅启动服务但不实际调用外部模型”的情况下运行，以及哪些示例必须在配置密钥后才能完整体验。
- 当用户在不同操作系统或目录结构下使用文档时，所有示例代码必须避免引用维护者的本地绝对路径，而是通过相对路径、占位符或文字说明引导用户根据自身环境替换路径。
- 当后续版本对核心能力或 API 行为做出变更时，文档需要给出明显的版本或变更说明，避免旧示例与新版本行为不一致导致用户困惑。

## 需求 *(必填)*

### 功能需求

- **FR-001**：官方文档站必须提供一个清晰的入口页面，向潜在用户说明项目解决的问题、适用人群以及文档整体结构，并能从该页面直接进入“快速开始”与“核心功能”相关章节。
- **FR-002**：文档必须提供一条从零开始的“快速开始”路径，包含环境准备说明、最小可用示例代码和预期输出示意，使新用户可以在 10 分钟内完成首次调用并看到成功结果。
- **FR-003**：文档必须系统性地介绍项目的核心能力与主要概念（如 Agent、配置、模型供应商集成、记忆与持久化、错误语义等），每个概念至少配有一个可复制的示例代码片段与典型使用场景说明。
- **FR-004**：文档必须提供至少 3 个端到端的高级案例页面（例如：多模型回退与路由、结合向量检索的知识库助手、带记忆的对话代理），每个案例包含完整可运行的示例代码、前置条件说明以及如何在真实业务中调整参数与结构的指导。
- **FR-005**：文档中的所有代码示例必须避免出现维护者或任何个人环境的绝对文件系统路径，只能使用安装说明、相对路径、模块名或抽象占位符，并在文本中明确提醒用户替换为自己的实际路径和配置。
- **FR-006**：文档必须提供一处集中展示核心配置与环境约束的章节，列出关键配置项、环境变量名称的含义以及典型配置方式，帮助用户在不阅读源码的前提下完成常见配置。
- **FR-007**：文档必须为四种语言（英文、中文、日文、韩文）提供结构一致的页面树，对应的“快速开始”“核心功能与 API”“高级案例”等章节在不同语言下的章节结构和示例代码保持一致，确保跨语言读者可以共享链接与讨论。
- **FR-008**：文档必须包含“贡献与质量保障”章节，向潜在贡献者说明在提交变更前需要执行的质量检查步骤（格式化、静态检查、测试、覆盖率、供应商回归、基准和契约检查），并强调这些步骤对项目稳定性的意义，而不依赖读者了解内部工具实现细节。
- **FR-009**：文档必须与现有的 quickstart 和契约文档保持一致，当契约或基线治具更新时，需要有明确的流程或提示，确保相应的用户文档在合理时间内同步更新，避免出现相互矛盾的指导。

### 关键实体 *(若涉及数据则必填)*

- **文档页面**：面向特定主题的内容单元，具有明确的标题、所属章节、语言版本和唯一链接，用于承载用户故事、说明文字和代码示例。
- **代码示例**：用于展示典型使用方式的独立代码片段或完整示例工程，包含前置条件、输入输出示例和可复制的文本，要求在不修改核心逻辑的前提下即可运行。
- **语言版本映射**：同一文档页面在不同语言下的对应关系，确保每个核心主题在英文、中文、日文、韩文中都有一一对应的页面和示例代码。
- **配置与环境说明**：汇总项目运行所依赖的环境变量、配置项和外部服务信息的内容集合，用于帮助用户在不同环境中完成部署与调试。

## 依赖与假设

- **目标用户假设**：主要面向具备基础编程能力、希望在自身业务中集成智能代理能力的开发者和技术决策者，假定其具备阅读英文或至少一种本地化语言文档的能力。
- **环境与托管依赖**：假设项目已有稳定的文档托管域名与发布流程，支持部署统一的文档站点，并提供基础的站内搜索与多语言切换能力。
- **多语言维护能力**：假设维护团队具备在合理时间内完成中英日韩四种语言内容更新与互相校对的能力，以保证结构和示例的一致性。
- **示例验证机制**：假设存在或将建立一种自动或半自动的示例验证机制，在每次发版前对核心示例和高级案例进行运行验证，确保文档与实际行为保持同步。
- **内部文档路径说明**：本规格与实现计划中的绝对路径（如本地仓库位置）仅用于帮助维护者在仓库内快速定位文件与脚本，不会直接出现在对外用户文档或示例代码中；对外文档始终遵守 FR-005 所述“仅使用相对路径或占位符路径”的约束。

## 成功标准 *(必填)*

### 可度量结果

- **SC-001**：在一次包含至少 10 名此前从未接触过本项目的新开发者的可用性测试中，在仅访问官方文档站（不得查阅源码或历史文档）的前提下，至少 80% 的参与者能够在 10 分钟内按照 “Quickstart / 快速开始” 章节完成环境准备、启动服务、发送第一条消息并获得一次成功响应；测试过程中的起止时间与成功/失败情况需记录在 `specs/001-vitepress-docs/artifacts/quickstart-notes.md` 中。
- **SC-002**：围绕“如何安装与上手”“如何配置模型供应商”“如何使用记忆或外部知识库”等前 5 大常见问题，以文档上线前连续两次版本迭代中的相关支持咨询量（issue、工单、内部支持记录）之和作为基线，在文档上线后连续两次版本迭代中，同类问题的总量较基线下降至少 40%；具体采集方式与统计口径需在 `specs/001-vitepress-docs/artifacts/docs-build-report.md` 或等价文档中简要记录，便于后续对比。
- **SC-003**：所有被标记为“核心功能”与“高级案例”的代码示例在每次发版前都能通过内部验证流程，确保示例与当前版本行为一致，不存在无法运行或输出与文档描述严重不符的情况。
- **SC-004**：在抽样检查中，“快速开始”“核心功能与 API”“高级案例”三个核心模块下的所有页面在英文、中文、日文、韩文四种语言中的结构保持一致，且没有缺失页面或明显内容脱节的情况。

## 宪章对齐 *(必填)*

- **纯 Go / 禁止桥接**：文档需要在“架构概览”或“快速开始”等显著位置明确说明运行时为纯 Go 实现，不依赖运行中的 Python 进程或其他语言桥接；所有示例与说明均不得引导用户通过子进程方式调用历史 Python 实现或本地脚本。
- **模型供应商矩阵**：文档需要提供一个面向用户的“模型供应商与能力矩阵”，列出当前支持的各家供应商及其提供的能力类型（如对话、嵌入、流式输出等），并以表格形式说明每项能力大致需要配置哪些环境变量或配置字段，帮助用户在选择和切换供应商时一目了然。
- **契约/治具与基准**：针对希望深入理解兼容性保证和回归策略的高级用户，文档应在“测试与契约”相关章节中说明契约治具与基线的存在位置及作用（例如用于验证各供应商行为的一致性），强调这些流程在运行时完全依赖 Go 工具链而非 Python 环境。
- **自动化与 Make**：在“贡献与质量保障”章节中，文档需要用用户友好的方式描述项目现有的一键化质量检查入口（包括格式化、静态检查、单元与契约测试、供应商回归、覆盖率与基准等），并说明这些命令会在持续集成环境中自动执行，从而为潜在贡献者设定清晰的质量预期。
- **测试纪律 + 85% 覆盖率**：文档应明确项目在测试覆盖率与测试类型上的目标（例如整体覆盖率不低于约定阈值，核心路径必须有单元测试与契约测试共同覆盖），并通过“如何为新特性编写测试”一节向贡献者解释预期，而不展开具体框架或库的实现细节。
- **密钥与安全**：在“配置与安全实践”相关章节中，文档需要说明如何通过环境变量或配置文件向系统注入各供应商的凭据，强调不得在示例或版本控制中暴露真实密钥，并通过占位符和示例 `.env` 文件帮助用户安全地管理敏感信息。
- **VitePress 官方文档与多语言**：文档站需以统一的导航结构呈现多语言内容，确保首页、快速开始、核心功能、高级案例和贡献指南在四种语言中都有对应页面和示例；同时，所有示例代码在不同语言版本中保持行为一致，仅在文字说明和注释语言上做本地化，不出现任何本地开发环境的绝对路径信息。

## 实现现状（2025-11-22）

本规格对应的第一轮实现已经完成以下内容（详见 `docs/` 与 `specs/001-vitepress-docs/tasks.md`）：

- **多语言文档站骨架**  
  - VitePress 工程已落地于 `docs/`，配置了 en/zh/ja/ko 四种语言的 `locales` 与导航。  
  - 首页（`index.md` / `zh/index.md` / `ja/index.md` / `ko/index.md`）与 Quickstart 页面在四种语言中均已存在。  

- **核心页面与导航**  
  - Core Features & API、Provider Matrix、高级案例（多模型路由、知识库助手、持久记忆对话）在四种语言下均有对应页面。  
  - 导航中统一提供 Overview、Quickstart、Core Features & API、Provider Matrix、Advanced Guides、Configuration & Security、Contributing & Quality Gates 等入口，并保持各语言间结构一致。  

- **配置与安全 / 贡献与质量章节**  
  - 新增 “Configuration & Security Practices” 与 “Contributing & Quality Gates” 页面（en/zh/ja/ko 对齐），集中说明环境变量、配置文件、密钥管理以及 `make fmt/lint/test/providers-test/coverage/bench/constitution-check/docs-build/docs-check` 等质量 Gate。  
  - Quickstart 与 Provider Matrix 页面已链接到配置与安全章节，指导用户从示例过渡到更系统的配置说明。  

- **路径安全与构建检查**  
  - `scripts/check-docs-paths.sh` 已接入 `make docs-check`，对 `docs/` 进行 `/Users/`、`C:\Users\` 等维护者绝对路径扫描，并在 CI 中串联 VitePress 构建。  
  - 当前环境下 `npm --prefix ./docs run docs:build` 能够成功构建站点，检查通过情况记录在 `artifacts/docs-build-report.md`。  

- **高级案例与验证笔记**  
  - 高级案例页面已完成，但由于 `go/cmd/agno` 入口尚未实现，T030 所描述的“基于 Go 运行时的端到端高级案例验证”目前以笔记形式记录在 `artifacts/advanced-scenarios-notes.md` 中，标记为被运行时缺失阻塞。  

后续迭代需继续按 Phase 6 任务与覆盖率 Gate（T030、T036–T037、T044–T045 等）补齐端到端示例验证、可用性测试与指标采集，届时应再次更新本节状态描述。  
